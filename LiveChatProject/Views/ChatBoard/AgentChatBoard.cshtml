@{
    var agentId = ViewData["AgentId"] ?? 0;
    var agentName = ViewData["AgentName"] ?? "Agent";
}

@section Styles {
    <style>
        /* Style for messages sent by the agent */
        .agent-message {
            text-align: left;
            background-color: #e0f7fa;
            padding: 8px;
            border-radius: 5px;
            margin-bottom: 10px;
            max-width: 60%;
            align-self: flex-start;
        }

        /* Style for messages sent by the user */
        .user-message {
            text-align: right;
            background-color: #c8e6c9;
            padding: 8px;
            border-radius: 5px;
            margin-bottom: 10px;
            max-width: 60%;
            align-self: flex-end;
        }

        /* Ensure the chat board uses flexbox for alignment */
        #chat-board {
            display: flex;
            flex-direction: column;
        }
    </style>
}


<h2>Agent Chat Board</h2>

<div style="display: flex;">
    <!-- Sidebar for user list -->
    <div id="user-list" style="width: 200px; border-right: 1px solid #ccc; padding-right: 10px;">
        <h4>Users</h4>
        <ul id="users" style="list-style-type: none; padding-left: 0;">
            <!-- User list will be loaded here via JavaScript -->
        </ul>
    </div>

    <!-- Chat board -->
    <div id="chat-board" style="flex-grow: 1; border: 1px solid #ccc; height: 300px; overflow-y: scroll; padding: 10px;">
        <!-- Messages will be displayed here -->
    </div>
</div>

<form id="message-form">
    <div class="form-group">
        <label for="message-input">Message:</label>
        <input type="text" id="message-input" class="form-control" />
    </div>
    <input type="hidden" id="agent-id" value="@agentId" />
    <input type="hidden" id="user-id" />
    <input type="hidden" id="user-name" />
    <input type="hidden" id="agent-name" value="@agentName" />
    <button type="submit" class="btn btn-primary">Send</button>
</form>

<!-- End Chat Button -->
<button id="end-chat-button" class="btn btn-secondary" style="margin-top: 10px;">End Chat</button>

@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/5.0.11/signalr.min.js"></script>
    <script src="~/js/agent-chat.js"></script>
}
